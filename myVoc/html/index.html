<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<title>My Vocabulary</title>
</head>
<style>
 .boxed {
  border-style: dashed;
  border-width: thin;
  border-color: lime;
}
</style>

<body  onload="about()" >

  <table class='boxed' border=0 style="width:1002"  bgcolor="#f0f0f0" >
        <tbody>
        <tr>
          <td>
            <a href="dic_add" target="rsp_main" >Add</a>
          </td>
          <td>
            <a href="dic_edit"  target="rsp_main" >Edit</a>
          </td>                      
          <td>
            <a href="about" target="rsp_main" >About</a> 
          </td>              
      </tr>
</tbody>
   </table>

    
   <br>
    <table width='1002' height='800' border=0>
       <tbody>
        <tr>
            <td>
                <iframe src = "" id=rsp_main name="rsp_main" width='100%'  height='100%' ></iframe>
            </td>
        </tr>
       </tbody>
    </table>

    <script>
      
      function ajaxShowResponse() {
        var frm = document.getElementById('rsp_main');
        var doc = frm.contentDocument;
        
        let rsp = JSON.parse(this.responseText);
        //JSON to HTML
        var html =  "<HTML>\n<BODY>\n"
        + "<br> <br> <br>"
        + "<h2 align='center'>CAD Number Registration System</h2>"
        + "<h3 align='center'> Mode = " + rsp.mode + "</h3><br>"
        + "<p align='center'>"
        + "<table><tbody>"
        + "<tr><td>Free:</td><td>"  + rsp.Free + "</td></tr>"
        + "<tr><td>Used:</td><td>"  + (Number(rsp.Locked) + Number(rsp.Taken)) + "</td></tr>"
        + "<tr><td>Taken:</td><td>" + rsp.Taken + "</td></tr>"
        + "<tr><td>Locked:</td><td>"+ rsp.Locked + "</td></tr>"
        + "<tr><td>Other:</td><td>" + rsp.Other + "</td></tr>"
        + "<tr><td>Total:</td><td>" + rsp.Total + "</td></tr>"
        + "</p>"
        + "</tbody></table>"
        + "\n</BODY>\n</HTML>";
        doc.write(html);
        doc.close();
        
        //Set radio
        if(rsp.mode == "TEST"){
          document.getElementById('test').checked  = true;
        }
        else if(rsp.mode == "REAL"){
          document.getElementById('real').checked  = true;
        }
      }
      function ajaxSend(url, verb = "POST"){
        var oReq = new XMLHttpRequest();
        oReq.addEventListener("load", ajaxShowResponse);
        oReq.open(verb, url);
        oReq.send();      
      }
      function about(){
        ajaxSend("/about","GET");
      }
      function doTestMode(){
        ajaxSend("/config/mode/test");
      }
      function doRealMode(){
        ajaxSend("/config/mode/real");
      }

    </script>

</body>
</html>
